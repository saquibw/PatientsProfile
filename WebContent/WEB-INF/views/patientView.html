<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="main :: header">

</head>
<body>
<div th:replace="main :: menu"></div>

<div id="patientViewPage" class="form-group">
		<form id="registrationForm" th:action="@{/updatepatient}" th:object="${patient}" method="post" accept-charset="utf-8">
			<table>
				<tr>
					<td><label>Registration No:</label> </td>
					<td><label class="form-control" th:text="${patient.regNo}" ></label></td>
					<td><label>Date:</label></td>
					<td><label class="form-control" th:text="${patient.creationDate}"></label></td>
					<td><label>Name:</label></td>
					<td><input type="text" class="form-control" th:field="*{name}" required="required"/></td>
				</tr>
				
				<tr>
					
					<td><label>Age:</label></td>
					<td><input type="number" class="form-control" th:field="*{age}" required="required"/></td>
					<td><label>Sex:</label></td>
					<td><select class="form-control" th:field="*{sex}" required="required">
						<option value="" selected="selected">-------- Select --------</option>
						<option value="Male">Male</option>
						<option value="Female">Female</option>
						<option value="Other">Other</option>
					</select></td>
					<td><label>Profession:</label></td>
					<td><input type="text" class="form-control" th:field="*{profession}"/></td>
				</tr>
				
				<tr>
					
					
					<td><label>Mobile:</label></td>
					<td><input type="text" class="form-control" th:field="*{contactNo}"/></td>
					<td><label>NID:</label></td>
					<td><input type="text" class="form-control" th:field="*{nid}"/></td>
					<td><label>Area:</label></td>
					<td><input type="text" class="form-control" th:field="*{area}"/></td>
				</tr>
				
				<tr>
					
					<td><label>Thana:</label></td>
					<td><input type="text" class="form-control" th:field="*{thana}"/></td>
					<td><label>Zilla:</label></td>
					<td><input type="text" class="form-control" th:field="*{zilla}"/></td>
					<td><label>Past History:</label></td>
					<td><textarea rows="1" class="form-control" th:field="*{pastHistory}"></textarea></td>		
				</tr>

				<tr>
					
					
					<td><label>Family History:</label></td>
					<td><textarea rows="1" class="form-control" th:field="*{familyHistory}"></textarea></td>
					<td><label>Smoking History:</label></td>
					<td><textarea rows="1" class="form-control" th:field="*{smokingHistory}"></textarea></td>
					<td><label>Drug History:</label></td>
					<td><textarea rows="1" class="form-control" th:field="*{drugHistory}"></textarea></td>		
				</tr>
				
				<tr>
					<td colspan="2"></td>
					<td colspan="2"><input type="submit" id="updatePatientButton" class="btn btn-success btn-lg full-width hide" value="Update Patient"/></td>
					<td colspan="2"></td>
				</tr>
			</table>
		</form>
	</div>
	
	<div id="patientViewer">
		<label>PATIENTS:</label>
		<div class="input-group searchBoxHolder">
			<input type="text" id="searchBox" class="form-control" placeholder="Search..."></input>
			<span class="input-group-addon"><i class="glyphicon glyphicon-search "></i></span>
			
		</div>
		<div id="patientViewTableHolder">
			<table class="table-bordered table-hover" id="patientViewTable">
			<thead>
			<tr>
				<th><label>Registration No</label></th>
				<th><label>Name</label></th>
				<th><label>Age</label></th>
				<th><label>Sex</label></th>
				<th><label>Profession</label></th>
				<th><label>Contact No</label></th>
				<th><label>NID</label></th>
				<th><label>Area</label></th>
				<th><label>Thana</label></th>
				<th><label>Zilla</label></th>
				<th></th>
				<th></th>
			</tr>
			<tr id="noPatientNotification">
				<td colspan="12" style="text-align:center;white-space:nowrap">No patients available</td>
			</tr>
			</thead>
			<tbody>
			</tbody>			
		</table>
		</div>		
	</div>
	
	<script>
	$("document").ready(function() {
		PatientManager.getPatientList("");
		
		var timeout = null;
		$("#searchBox").on("keyup", function(e){
			clearTimeout(timeout);
			timeout = setTimeout(function(){
				var param = $("#searchBox").val();
				PatientManager.getPatientList(param);
			},1000);			
		});
	});
	</script>
</body>
</html>